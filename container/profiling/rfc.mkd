## Profiling container

 * Version: 1.0.0
 * Maintainer: Johannes Dr√∂ge <johannes.droege@uni-duesseldorf.de>

### Contents

* Outline
* Input
  * General Definition
    * Description
    * Mounts
    * File/Folder Object Definition
* Output
  * General Definition
  * Description
  * Mounts
* Signature
* Example
  
### Outline

This specification describes the interface for containerised profiling applications. 
A profiling application gives an insight into the composition of the microbial community by assigning percentage values to taxonomic identifiers.

In addition to the specifications described below, this container MUST implement the
specifications defined in ['Generic bioinformatics container'](https://github.com/bioboxes/rfc/blob/master/rfc.mkd#generic-bioinformatics-container). 

### Input

#### General Definition

A biobox requires an input YAML with the following definition 

~~~YAML
version: 1.0.0
arguments:
  reads:
    - format: bioboxes.org:/fastq
      path: STRING
  databases:
    taxonomy:
      path: STRING
      format: bioboxes.org:/taxonomy_ncbi_dumps  
  cache: STRING
~~~

##### Description:

* **version**: The current version is specified directly under the heading.
* **arguments**: The arguments field consists of the following fields 
       * **reads**: An array of gzipped fastq sequence libraries.
       * **databases**: The taxonomy database. A directory containing nodes.dmp and names.dmp. 
       * **cache**: Path to a cache directory.

##### Mounts:
 * Your output directory MUST be mounted to /bbx/mnt/output
 * Your input files MUST be mounted to /bbx/mnt/input
 * The input biobox.yaml MUST be placed as /bbx/mnt/input/biobox.yaml

##### File/Folder object entries

```YAML
  path: STRING
  format: STRING
```

* `path` means absolute path to file in container
* `format` gives a machine-checkable type definition (will be transformed to YAML tag in future)

### Outputs

#### General Definition

~~~YAML
---
version: NUMBER.NUMBER.NUMBER
arguments: 
    profiling:
       path: STRING
       format: bioboxes.org:/profling:0.9
~~~

#### Description:

This yaml with the name biobox.yaml will be available on a successful run and can be found in your mounted output directory.

* version: The current version is specified directly under the heading.
* arguments: The arguments field consists out of the profiling field

#### Mounts:

If the directory /bbx/metadata is mounted then the following files should be placed inside the directory:
log.txt Logging information that is generated by the application inside the container.

### Signature

Any biobox based profiling tool accepts at least one of the following signatures:

    fastq A -> profiling B
    fastq A, database B -> profiling C

### Example

This is an example biobox.yaml file:

~~~YAML
version: 1.0.0
arguments:
  reads:
    - format: bioboxes.org:/fastq
      path: /path/to/fastq
  databases:
    taxonomy:
      path: /path/to/fastq
      format: bioboxes.org:/taxonomy_ncbi_dumps  
  cache: /path/to/cache/directory
~~~
